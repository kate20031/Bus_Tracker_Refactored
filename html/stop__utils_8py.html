<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bus Tracker: BusTracker/utils/stop_utils.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Bus Tracker
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('stop__utils_8py.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">stop_utils.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This module contains functions for loading and processing vehicle accuracy data related to bus stop locations and punctuality.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa0566885531fef3460149f7b2fbabfe1" id="r_aa0566885531fef3460149f7b2fbabfe1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0566885531fef3460149f7b2fbabfe1">Zaliczeniowy_autobusy.BusTracker.utils.stop_utils.find_stop</a> (lat, lon, stops_data)</td></tr>
<tr class="memdesc:aa0566885531fef3460149f7b2fbabfe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a bus stop based on geographical coordinates.  <br /></td></tr>
<tr class="separator:aa0566885531fef3460149f7b2fbabfe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6511835cdefc84fb98e63d7d4834322e" id="r_a6511835cdefc84fb98e63d7d4834322e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6511835cdefc84fb98e63d7d4834322e">Zaliczeniowy_autobusy.BusTracker.utils.stop_utils.load_vehicle_accuracy</a> (vehicle_json, stops_data, new_json_data)</td></tr>
<tr class="memdesc:a6511835cdefc84fb98e63d7d4834322e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads vehicle accuracy data by matching vehicles to bus stops.  <br /></td></tr>
<tr class="separator:a6511835cdefc84fb98e63d7d4834322e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823e1d9ae45c4e8d3c96c9707b65535f" id="r_a823e1d9ae45c4e8d3c96c9707b65535f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a823e1d9ae45c4e8d3c96c9707b65535f">Zaliczeniowy_autobusy.BusTracker.utils.stop_utils.load_punctuality_accuracy</a> (bus_data, stops_data, bus_data_output)</td></tr>
<tr class="memdesc:a823e1d9ae45c4e8d3c96c9707b65535f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads punctuality accuracy data and writes it to a CSV file.  <br /></td></tr>
<tr class="separator:a823e1d9ae45c4e8d3c96c9707b65535f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module contains functions for loading and processing vehicle accuracy data related to bus stop locations and punctuality. </p>
<p>The functions in this module find bus stops for specific coordinates, calculate distance between them, and determine whether a bus is at the correct stop at the expected time. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa0566885531fef3460149f7b2fbabfe1" name="aa0566885531fef3460149f7b2fbabfe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0566885531fef3460149f7b2fbabfe1">&#9670;&#160;</a></span>find_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Zaliczeniowy_autobusy.BusTracker.utils.stop_utils.find_stop </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lat</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>lon</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stops_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds a bus stop based on geographical coordinates. </p>
<p>This function checks each stop in the provided stop data and calculates the distance between the input coordinates and each stop's coordinates. If the distance is less than or equal to 1 meter, it returns the matching bus stop's <code>zespol</code> (team) and <code>slupek</code> (pole).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lat</td><td>Latitude of the vehicle's current location. </td></tr>
    <tr><td class="paramname">lon</td><td>Longitude of the vehicle's current location. </td></tr>
    <tr><td class="paramname">stops_data</td><td>List of bus stops data that includes geographical coordinates. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A tuple containing the <code>zespol</code> (team) and <code>slupek</code> (pole) if a matching stop is found; otherwise, <code>None, None</code>.</dd></dl>
<pre class="fragment">This function takes in latitude, longitude, and stop data.
It then finds and returns the stop matching the input coordinates.
</pre> 
</div>
</div>
<a id="a823e1d9ae45c4e8d3c96c9707b65535f" name="a823e1d9ae45c4e8d3c96c9707b65535f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a823e1d9ae45c4e8d3c96c9707b65535f">&#9670;&#160;</a></span>load_punctuality_accuracy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Zaliczeniowy_autobusy.BusTracker.utils.stop_utils.load_punctuality_accuracy </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>bus_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stops_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>bus_data_output</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads punctuality accuracy data and writes it to a CSV file. </p>
<p>This function processes bus data and calculates punctuality accuracy by finding the closest bus stop for each vehicle. The resulting data is saved in a CSV file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus_data</td><td>A dictionary of vehicle data, where each entry represents a specific vehicle's data. </td></tr>
    <tr><td class="paramname">stops_data</td><td>List of bus stops data, including the stops' coordinates. </td></tr>
    <tr><td class="paramname">bus_data_output</td><td>Path to the CSV file where the resulting accuracy data will be written. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The processed vehicle data with added accuracy information.</dd></dl>
<pre class="fragment">This function loads punctuality accuracy data.
It creates a new data frame with
the vehicle accuracy data calculated for all vehicles in bus_data
and writes it to a CSV file.
</pre> 
</div>
</div>
<a id="a6511835cdefc84fb98e63d7d4834322e" name="a6511835cdefc84fb98e63d7d4834322e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6511835cdefc84fb98e63d7d4834322e">&#9670;&#160;</a></span>load_vehicle_accuracy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Zaliczeniowy_autobusy.BusTracker.utils.stop_utils.load_vehicle_accuracy </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>vehicle_json</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stops_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>new_json_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads vehicle accuracy data by matching vehicles to bus stops. </p>
<p>This function iterates through the provided vehicle data and finds the closest bus stop for each vehicle's geographical coordinates. It then adds the stop information (<code>zespol</code>, <code>slupek</code>) to the vehicle's data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vehicle_json</td><td>List of vehicle data, including the vehicle's geographical coordinates. </td></tr>
    <tr><td class="paramname">stops_data</td><td>List of bus stops data, including the stops' coordinates. </td></tr>
    <tr><td class="paramname">new_json_data</td><td>A list where the updated vehicle data with bus stop information will be appended.</td></tr>
  </table>
  </dd>
</dl>
<pre class="fragment">This function loads vehicle accuracy data by finding
stops for specific coordinates
and updating new_json_data with these findings.
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f66a6000f7604132c7c868b5638e5195.html">BusTracker</a></li><li class="navelem"><a class="el" href="dir_461a90e6855afb34d61b83d34d1e1e4d.html">utils</a></li><li class="navelem"><a class="el" href="stop__utils_8py.html">stop_utils.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
